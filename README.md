# VPN Bot - –°–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–∞–∂–∏ VPN-–ø–æ–¥–ø–∏—Å–æ–∫

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ VPN-–ø–æ–¥–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ 3X-UI —Å –≤–µ–±-–ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, Telegram-–±–æ—Ç–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å JWT
- üìä –î–∞—à–±–æ—Ä–¥ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–≤—ã—Ä—É—á–∫–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–ª–∞—Ç–µ–∂–∏)
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- üí∏ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (3X-UI, –Æ–∫–∞—Å—Å–∞, Telegram)
- üì¶ –õ–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üîß DevOps —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

### Telegram-–±–æ—Ç
- üõí –ü–æ–∫—É–ø–∫–∞ VPN-–ø–æ–¥–ø–∏—Å–æ–∫
- üîÑ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- üìÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- üîó –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚öôÔ∏è –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- üí∞ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Æ–∫–∞—Å—Å—É

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- üîó 3X-UI API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- üí≥ –Æ–∫–∞—Å—Å–∞ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- ü§ñ Telegram Bot API

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Python FastAPI, SQLite, SQLAlchemy
- **Frontend**: Next.js 14, React, Tailwind CSS, shadcn/ui
- **Bot**: Python aiogram 3
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: Docker, docker-compose, nginx, certbot

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-repo/vpn-bot.git
cd vpn-bot

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
chmod +x install.sh
sudo ./install.sh
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç:
- Yookassa Shop ID –∏ Secret Key
- 3X-UI URL –∏ Token
- Telegram Bot Token
- Admin Telegram ID
- –î–æ–º–µ–Ω –¥–ª—è SSL

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ docker-compose
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.template` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã: `docker-compose up -d`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `docker-compose exec backend alembic upgrade head`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# Database
DATABASE_URL=postgresql://user:password@db:5432/vpn_bot

# JWT
JWT_SECRET=your_jwt_secret_here

# Admin credentials
ADMIN_LOGIN=admin
ADMIN_PASSWORD=123456

# 3X-UI Integration
XUI_URL=https://your-xui-server.com
XUI_TOKEN=your_xui_token_here

# Yookassa Integration
YOOKASSA_SHOP_ID=your_yookassa_shop_id
YOOKASSA_SECRET_KEY=your_yookassa_secret_key

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
ADMIN_TELEGRAM_ID=your_admin_telegram_id

# Domain
DOMAIN=your-domain.com
SSL_EMAIL=your-email@example.com
```

## üì° API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /users/{id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `PUT /users/{id}/extend` - –ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `DELETE /users/{id}` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–ª–∞—Ç–µ–∂–∏
- `GET /payments` - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- `POST /payments/create` - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂

### –¢–∞—Ä–∏—Ñ—ã
- `GET /tariffs` - –°–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤
- `POST /tariffs` - –°–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /dashboard/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞
- `GET /logs` - –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

### Webhooks
- `POST /payments/yookassa/webhook` - Webhook –æ—Ç –Æ–∫–∞—Å—Å—ã
- `POST /bot/webhook` - Webhook –æ—Ç Telegram

## ü§ñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –í—ã–±–µ—Ä–∏—Ç–µ "üõí –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
4. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –Æ–∫–∞—Å—Å—É
5. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –¥–æ—Å—Ç—É–ø—ã –ø—Ä–∏–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `/admin` - –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –±–æ—Ç–µ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è API
- HTTPS —á–µ—Ä–µ–∑ Let's Encrypt
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- Docker logs –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üöÄ –î–µ–ø–ª–æ–π

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub:
   - `SSH_PRIVATE_KEY` - SSH –∫–ª—é—á –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
   - `SERVER_HOST` - IP —Å–µ—Ä–≤–µ—Ä–∞
   - `SERVER_USER` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

2. Push –≤ main –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Backend
```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

### Frontend
```bash
cd frontend
npm install
npm run dev
```

### Bot
```bash
cd bot
pip install -r requirements.txt
python main.py
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ù–∞–ø–∏—à–∏—Ç–µ –≤ Telegram: @your_support_bot